!function(t){function e(e){for(var o,r,u=e[0],s=e[1],c=e[2],d=0,f=[];d<u.length;d++)r=u[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);for(l&&l(e);f.length;)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(o=!1)}o&&(i.splice(e--,1),t=u(u.s=n[0]))}return t}var o={},r={1:0},a={1:0},i=[];function u(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[];r[t]?e.push(r[t]):0!==r[t]&&{3:1,4:1,5:1,6:1}[t]&&e.push(r[t]=new Promise((function(e,n){for(var o="static/css/"+({0:"async-vendors"}[t]||t)+"."+{0:"31d6cfe0d16ae931b73c",3:"a2db40afb2f16a20db64",4:"c35085f0cf809c027ca5",5:"62b16f71bc96be7fd253",6:"537c6828a566fb478f29"}[t]+".css",a=u.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=(l=i[s]).getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(c===o||c===a))return e()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){var l;if((c=(l=d[s]).getAttribute("data-href"))===o||c===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");i.request=o,delete r[t],f.parentNode.removeChild(f),n(i)},f.href=a,document.getElementsByTagName("head")[0].appendChild(f)})).then((function(){r[t]=0})));var n=a[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=a[t]=[e,o]}));e.push(n[2]=o);var i,s=document.createElement("script");s.charset="utf-8",s.timeout=120,u.nc&&s.setAttribute("nonce",u.nc),s.src=function(t){return u.p+"static/js/"+t+"."+{0:"c48b92dd9bb0949b02bc",3:"91145318ab81f2030185",4:"dae74be291b4c521d14f",5:"6f76748ff410fe67e342",6:"82d80de2b6b2e1d70f5a"}[t]+".js"}(t);var c=new Error;i=function(e){s.onerror=s.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",c.name="ChunkLoadError",c.type=o,c.request=r,n[1](c)}a[t]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:s})}),12e4);s.onerror=s.onload=i,document.head.appendChild(s)}return Promise.all(e)},u.m=t,u.c=o,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)u.d(n,o,function(e){return t[e]}.bind(null,o));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="./",u.oe=function(t){throw console.error(t),t};var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var l=c;i.push(["Vtdi",2]),n()}({"A0++":function(t,e,n){"use strict";n("zBwo")},BGIR:function(t,e,n){"use strict";n("WIVd")},Lqv5:function(t,e){t.exports={baseURL:"//note-server.hunger-valley.com"}},V2Gd:function(t,e,n){"use strict";n("zPx7")},Vtdi:function(t,e,n){"use strict";n.r(e);var o=n("pZNA"),r=n("bS4n"),a=n.n(r),i=n("8t5x"),u={created:function(){this.checkLogin()},data:function(){return{}},computed:a()({},Object(i.c)(["slug","username"])),methods:a()({},Object(i.b)(["checkLogin"]))},s=(n("BGIR"),n("XSKF")),c={components:{Avatar:Object(s.a)(u,(function(){var t=this.$createElement;return(this._self._c||t)("span",{attrs:{title:this.username}},[this._v(this._s(this.slug))])}),[],!1,null,"6ccd96f1",null).exports},methods:a()({},Object(i.b)(["Logout"]),{onLogout:function(){this.Logout()}})},d=(n("V2Gd"),{name:"app",components:{sidebar:Object(s.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"sidebar"}},[e("Avatar"),this._v(" "),e("div",{staticClass:"icons"},[e("router-link",{attrs:{to:"/note",title:"笔记"}},[e("i",{staticClass:"iconfont icon-note"})]),this._v(" "),e("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[e("i",{staticClass:"iconfont icon-notebook"})]),this._v(" "),e("router-link",{attrs:{to:"/trash",title:"回收站"}},[e("i",{staticClass:"iconfont icon-trash"})])],1),this._v(" "),e("div",{staticClass:"logout",on:{click:this.onLogout}},[e("i",{staticClass:"iconfont icon-logout"})])],1)}),[],!1,null,"120e2fa1",null).exports}}),l=(n("A0++"),Object(s.a)(d,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("sidebar"),this._v(" "),e("router-view")],1)}),[],!1,null,null,null).exports),f=n("uOVN");o.default.use(f.a);var m=new f.a({routes:[{path:"/",alias:"/notebooks",component:function(){return n.e(4).then(n.bind(null,"LpAg"))}},{path:"/login",name:"Login",component:function(){return n.e(5).then(n.bind(null,"V4qv"))}},{path:"/note",component:function(){return Promise.all([n.e(0),n.e(3)]).then(n.bind(null,"NyM5"))}},{path:"/trash",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"crCc"))}}]}),I=n("Asgo"),h=n.n(I),p=n("c+98"),v=n.n(p),g=n("Lqv5"),b=n.n(g),N=n("J2PO"),E=n.n(N);function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new h.a((function(o,r){var a={url:t,method:e,validityState:function(t){return satus>=200&&t<300||400===t}};"get"===e.toLowerCase()?a.params=n:a.data=n,v()(a).then((function(t){200===t.status?(o(t.data),console.log(t.data)):r(t.data)})).catch((function(t){Object(N.Message)({type:"error",message:t.response.data.msg}),r(t)}))}))}v.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",v.a.defaults.baseURL=b.a.baseURL,v.a.defaults.withCredentials=!0;var y=n("Q2cO"),A=n.n(y);function L(t){var e=("object"===(void 0===t?"undefined":A()(t))?t:new Date(t)).getTime(),n=Date.now()-e,o="";switch(!0){case n<6e4:o="刚刚";break;case n<36e5:o=Math.floor(n/6e4)+"分钟前";break;case n<864e5:o=Math.floor(n/36e5)+"小时前";break;default:o=Math.floor(n/864e5)+"天前"}return o}var w={GET:"/notebooks",ADD:"/notebooks",EDIT:"/notebooks/noteId",DELETE:"/notebooks/noteId"},C=function(){return new h.a((function(t,e){T(w.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.updatedAt<e.updatedAt?1:-1})),e.data.forEach((function(t){t.friendlyCreatedAt=L(t.createdAt),t.friendlyUpdatedAt=L(t.updatedAt)})),t(e)})).catch((function(t){return e(t)}))}))},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""},e=t.title,n=void 0===e?"":e;return T(w.ADD,"POST",{title:n})},O=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:""},n=e.title,o=void 0===n?"":n;return T(w.EDIT.replace("noteId",t),"PATCH",{title:o})},k=function(t){return T(w.DELETE.replace("noteId",t),"DELETE")},P={noteList:null,curNoteId:null},j={state:P,getters:{noteList:function(t){return t.noteList||[]},curNote:function(t){return Array.isArray(t.noteList)?t.curNoteId?t.noteList.find((function(e){return e.id==t.curNoteId}))||{}:t.noteList[0]||{}:{}}},mutations:{getNoteList:function(t,e){t.noteList=e.noteList},createNote:function(t,e){t.noteList.unshift(e.note),e.note.friendlyUpdatedAt="刚刚",e.note.friendlyCreatedAt="刚刚"},editNote:function(t,e){var n=t.noteList.find((function(t){return t.id==e.noteId}))||{};n.title=e.title,n.friendlyUpdatedAt="刚刚"},deleteNote:function(t,e){t.noteList=t.noteList.filter((function(t){return t.id!=e.noteId}))},setCurNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curNoteId=e.curNoteId}},actions:{getNoteList:function(t){var e=t.commit;return null!==P.noteList?h.a.resolve():C().then((function(t){return e("getNoteList",{noteList:t.data})}))},createNote:function(t,e){var n=t.commit;return D({title:e.title}).then((function(t){n("createNote",{note:t.data}),N.Message.success(t.msg)}))},editNote:function(t,e){var n=t.commit;return O(e.noteId,{title:e.title}).then((function(t){n("editNote",{noteId:e.noteId,title:e.title}),N.Message.success(t.msg)}))},deleteNote:function(t,e){var n=t.commit;return k(e.noteId).then((function(t){n("deleteNote",{noteId:e.noteId}),N.Message.success(t.msg)}))}}},M={GET:"/notes/from/noteId",ADD:"/notes/to/noteId",EDIT:"/notes/noteItemId",DELETE:"/notes/noteItemId",DELETECONFIRM:"/notes/noteItemId/comfirm"},_=function(t){var e=t.noteId;return new h.a((function(t,n){T(M.GET.replace("noteId",e)).then((function(e){e.data.forEach((function(t){t.friendlyCreatedAt=L(t.createdAt),t.friendlyUpdatedAt=L(t.updatedAt)})),t(e)})).catch((function(t){return n(t)}))}))},U=function(t){var e=t.noteId,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},o=n.title,r=void 0===o?"":o,a=n.content,i=void 0===a?"":a;return new h.a((function(t,n){T(M.ADD.replace("noteId",e),"POST",{title:r,content:i}).then((function(e){e.data.friendlyCreatedAt=L(e.data.createdAt),e.data.friendlyUpdatedAt=L(e.data.updatedAt),t(e)})).catch((function(t){return n(t)}))}))},S=function(t,e){var n=t.noteItemId,o=e.title,r=e.content;return T(M.EDIT.replace("noteItemId",n),"PATCH",{title:o,content:r})},x=function(t){var e=t.noteItemId;return T(M.DELETE.replace("noteItemId",e),"DELETE")},G={state:{noteItems:null,curNoteItemId:null},getters:{noteItems:function(t){return t.noteItems||[]},curNoteItem:function(t){return Array.isArray(t.noteItems)?t.curNoteItemId?t.noteItems.find((function(e){return e.id==t.curNoteItemId}))||{title:"",content:""}:t.noteItems[0]||{title:"",content:""}:{title:"",content:""}}},mutations:{getNoteItems:function(t,e){t.noteItems=e.noteItems},addNoteItem:function(t,e){t.noteItems.unshift(e.noteItem)},editNoteItem:function(t,e){var n=t.noteItems.find((function(t){return t.id==e.noteItemId}))||{};n.title=e.title,n.content=e.content,n.friendlyUpdatedAt="刚刚"},deleteNoteItem:function(t,e){t.noteItems=t.noteItems.filter((function(t){return t.id!=e.noteItemId}))},setCurNoteItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curNoteItemId=e.curNoteItemId}},actions:{getNoteItems:function(t,e){var n=t.commit,o=e.noteId;return _({noteId:o}).then((function(t){return n("getNoteItems",{noteItems:t.data})}))},addNoteItem:function(t,e){var n=t.commit,o=e.noteId;return U({noteId:o}).then((function(t){n("addNoteItem",{noteItem:t.data}),N.Message.success(t.msg)}))},editNoteItem:function(t,e){var n=t.commit,o=e.noteItemId,r=e.title,a=e.content;return S({noteItemId:o},{title:r,content:a}).then((function(){n("editNoteItem",{noteItemId:o,title:r,content:a})}))},deleteNoteItem:function(t,e){var n=t.commit,o=e.noteItemId;return x({noteItemId:o}).then((function(t){n("deleteNoteItem",{noteItemId:o}),N.Message.success(t.msg)}))}}},R="/auth/register",V="/auth/login",q="/auth/logout",B="/auth",H=function(t){var e=t.username,n=t.password;return T(R,"POST",{username:e,password:n})},z=function(t){var e=t.username,n=t.password;return T(V,"POST",{username:e,password:n})},J=function(){return T(q)},$=function(){return T(B)},F={state:{user:null},getters:{username:function(t){return null===t.user?"未登录":t.user.username},slug:function(t){return null===t.user?"未":t.user.username.charAt(0)}},mutations:{setUser:function(t,e){t.user=e.user}},actions:{LoginUser:function(t,e){var n=t.commit,o=e.username,r=e.password;return z({username:o,password:r}).then((function(t){return n("setUser",{user:t.data})}))},RegisterUser:function(t,e){var n=t.commit,o=e.username,r=e.password;return H({username:o,password:r}).then((function(t){n("setUser",{user:t.data}),N.Message.success(t.msg)}))},Logout:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/login"};return J().then((function(t){e("setUser",{user:null}),m.push(n),N.Message.success(t.msg)}))},checkLogin:function(t){var e=t.commit,n=t.state,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{path:"/login"};return null!==n.user?h.a.resolve():$().then((function(t){if(!t.isLogin)return m.push(o);e("setUser",{user:t.data})}))}}},W={GET:"/notes/trash",REVERT:"/notes/:noteItemId/revert",DELETE:"/notes/:noteItemId/confirm"},K=function(){return new h.a((function(t,e){T(W.GET).then((function(e){e.data=e.data.sort((function(t,e){return t.updatedAt<e.updatedAt?1:-1})),e.data.forEach((function(t){t.friendlyCreatedAt=L(t.createdAt),t.friendlyUpdatedAt=L(t.updatedAt)})),t(e)})).catch((function(t){return e(t)}))}))},Q=function(t){var e=t.noteItemId;return T(W.DELETE.replace(":noteItemId",e),"DELETE")},X=function(t){var e=t.noteItemId;return T(W.REVERT.replace(":noteItemId",e),"PATCH")},Z={state:{trashNoteItems:null,curTrashNoteItemId:null},getters:{trashNoteItems:function(t){return t.trashNoteItems||[]},curTrashNoteItem:function(t,e){return t.curTrashNoteItemId?t.trashNoteItems.find((function(e){return e.id==t.curTrashNoteItemId}))||{}:e.trashNoteItems[0]||{}},belongTo:function(t,e,n,o){return(o.noteList.find((function(t){return t.id==e.curTrashNoteItem.notebookId}))||{}).title||""}},mutations:{getAllTrashNoteItems:function(t,e){var n=e.trashNoteItems;t.trashNoteItems=n},deleteTrashNoteItem:function(t,e){var n=e.noteItemId;t.trashNoteItems=t.trashNoteItems.filter((function(t){return t.id!=n}))},setCurTrashNoteItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.curTrashNoteItemId=e.curTrashNoteItemId}},actions:{getAllTrashNoteItems:function(t){var e=t.commit;return K().then((function(t){e("getAllTrashNoteItems",{trashNoteItems:t.data})}))},deleteTrashNoteItem:function(t,e){var n=t.commit,o=e.noteItemId;return Q({noteItemId:o}).then((function(t){n("deleteTrashNoteItem",{noteItemId:o}),N.Message.success(t.msg)}))},revertTrashNoteItem:function(t,e){var n=t.commit,o=e.noteItemId;return X({noteItemId:o}).then((function(t){n("deleteTrashNoteItem",{noteItemId:o}),N.Message.success(t.msg)}))}}};o.default.use(i.a);var Y=new i.a.Store({modules:{noteList:j,noteItems:G,user:F,trash:Z}});n("qD3H");o.default.config.productionTip=!1,o.default.use(E.a),new o.default({el:"#app",router:m,store:Y,render:function(t){return t(l)}})},WIVd:function(t,e,n){},qD3H:function(t,e,n){},zBwo:function(t,e,n){},zPx7:function(t,e,n){}});
//# sourceMappingURL=app.92784ccbdea3564518fc.js.map